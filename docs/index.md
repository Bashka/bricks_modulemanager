# Диспетчеризация модулей

Класс _Manager_ позволяет загрузить и инициализировать модули приложения. Для 
этого при инстанциации класса необходимо указать адрес каталога, в котором будут 
хранится модули (хранилище модулей), а так же, опционально, список имен модулей, 
которые следует загрузить. Если они не указаны, будут загружены все найденные в 
хранилище модули. Так же использование списка позволяет указать порядок загрузки 
модулей, в противном случае загрузка выполняется в алфовитном порядке имен по 
возрастанию.

Метод _init_ непосредственно загружает и инициализирует модули. Этот метод может 
принимать в качестве первого параметра имя метода, который необходимо вызвать в 
объекте модуля. Если для инициализации недостаточно простого вызова метода, 
можно воспользоваться анонимной функцией передав ее в качестве первого 
параметра. Эта функция будет вызвана для каждого модуля и получет следующие 
параметры:

- Экземпляр модуля
- Адрес каталога, содержащего модуль
- Данные, переданные во втором параметре

Без использования анонимной функции, в метод инициализации модуля можно передать 
любые данные, для этого достаточно передать в качестве второго параметра метода 
_init_ массив этих данных.

Пример инициализации с помощью вызова метода:

```php
$manager = new Manager('app/modules');
// Вызов метода main с передачей ему в качестве первого параметра $locator
$manager->init('main', [$locator]);
```

Пример инициализации с помощью анонимной функции:

```php
$manager = new Manager('app/modules', ['Application', 'User']);
$manger->init(function($module, $moduleName, $moduleLocation) use($locator){
  $locator->get('loader')->pref($moduleName, $moduleLocation);
  $module->init($locator);
});
```
